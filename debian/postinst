#!/bin/sh
set -e

case "$1" in
    configure)
        # Update icon cache
        if which update-icon-caches >/dev/null 2>&1 ; then
            update-icon-caches /usr/share/icons/hicolor
        fi
        
        # Update desktop database
        if which update-desktop-database >/dev/null 2>&1 ; then
            update-desktop-database -q /usr/share/applications
        fi
        
        # Check if OpenVPN3 is installed
        if ! which openvpn3 >/dev/null 2>&1 ; then
            echo ""
            echo "========================================="
            echo "NOTICE: OpenVPN3 is not installed"
            echo "========================================="
            echo ""
            echo "VPN3GUI requires OpenVPN3 to function."
            echo "You can install it by running VPN3GUI and"
            echo "using Tools -> Install OpenVPN3"
            echo ""
            echo "Or manually install with:"
            echo "  sudo apt install openvpn3"
            echo ""
        fi
        
        # Suggest keyring installation for secure storage
        if ! dpkg -l | grep -q python3-keyring ; then
            echo ""
            echo "TIP: For secure password storage, install:"
            echo "  sudo apt install python3-keyring python3-secretstorage gnome-keyring"
            echo ""
        fi
        ;;

    abort-upgrade|abort-remove|abort-deconfigure)
        ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

#DEBHELPER#

exit 0